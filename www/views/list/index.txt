<ion-view title="产品列表" hide-back-button="true">
    <ion-nav-buttons side="right">
        <button class="button" ng-click="filterShow()">
            <i class="icon i-filter"></i>
        </button>
    </ion-nav-buttons>
    <ion-content class="has-tabs" padding="false" delegate-handle="list">
        <ion-refresher
            pulling-text="下拉刷新..."
            on-refresh="refresh()">
        </ion-refresher>
        <ion-list>
            <ion-item class="product-item" ng-repeat="product in products">
                <h2 class="title">{{product.name}}</h2>
                <a class="tour" ng-repeat="tour in product.tours" href="#/detail/{{tour.id}}">
                    <span class="date">{{tour.date}}</span>
                    <span class="storage">余位：<strong>{{tour.num}}</strong></span>
                    <span class="price">&yen;<strong>{{tour.price}}</strong></span>
                    <i class="icon i-back"></i>
                </a>
                <p ng-if="product.hasMore&&product.loading" style="text-align:center;padding-top:10px;">
                    <ion-spinner icon="dots"></ion-spinner>
                </p>
                <a class="more" ng-if="product.hasMore&&!product.loading" ng-click="loadTours(product.id)">...</a>
            </ion-item>
        </ion-list>
        <ion-infinite-scroll on-infinite="load()" distance="1%" spinner="dots" ng-if="hasMore" immediate-check="false"></ion-infinite-scroll>
    </ion-content>
    <!--ion-content class="has-tabs" padding="false">
        <div class="filter-bar-bg"></div>
        <div class="filter-panel" style="height:395px;">
            <p class="filter-type J-tabs">
                <a class="current" ng-click="switchTab(0)">条件查找</a>
                <a ng-click="switchTab(1)">精确查找</a>
            </p>
            <div class="tab-panel J-tab-panel">
                <p>
                    <span class="name">出发城市</span>
                    <a class="input" ng-click="selectStart()">北京、上海</a>
                </p>
                <p>
                    <span class="name">目的地</span>
                    <category-checkbox class="input" placeholder="请输入"
                                source="destSource"
                                ng-model="dests">
                                {{value.join("、")}}
                    </category-checkbox>
                </p>
                <p>
                    <span class="name">出团日期</span>
                    <span class="half">
                        <calendar class="input" placeholder="选择日期" ng-model="startDateBegin" end="startDateEnd">
                            {{month}}月{{day}}日
                            <em>周{{week | weekName}}</em>
                        </calendar>
                    </span>
                    <span class="half">
                        <calendar class="input" placeholder="选择日期" ng-model="startDateEnd" begin="startDateBegin">
                            {{month}}月{{day}}日
                            <em>周{{week | weekName}}</em>
                        </calendar>
                    </span>
                    <span class="split"></span>
                </p>
                <p>
                    <span class="name">线路玩法</span>
                    <checkbox class="input" ng-model="playList"
                            title="线路玩法"
                            source="playSource"
                            placeholder="请选择">
                            {{value.join("、")}}
                    </checkbox>
                </p>
                <p>
                    <span class="name">产品特色</span>
                    <checkbox class="input" ng-model="featureList"
                            title="产品特色"
                            source="featureSource"
                            placeholder="请选择">
                            {{value.join("、")}}
                    </checkbox>
                </p>
                <a class="confirm-btn" ng-click="ok()">确定</a>
            </div>
            <div class="tab-panel J-tab-panel tab-panel-hide">
                <p>
                    <span class="name">产品名称/团号</span>
                    <a class="input" ng-click=""></a>
                </p>
                <a class="confirm-btn" ng-click="ok()">确定</a>
            </div>
        </div>
    </ion-content-->
</ion-view>